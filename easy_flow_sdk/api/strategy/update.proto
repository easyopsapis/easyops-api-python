syntax = "proto3";
package strategy;




import "model/cmdb/cluster_info.proto";
import "model/easy_flow/deploy_batch_target.proto";
import "model/easy_flow/target_info.proto";
import "model/easy_flow/deploy_strategy.proto";

/*
Update请求
*/
message UpdateRequest {
message PackageList {
    /*
    集群
    */
    cmdb.ClusterInfo cluster = 1 ;
    /*
    目标版本
    */
    string targetVersion = 2 ;
    /*
    是否提前暂停
    */
    string preStop = 3 ;
    /*
    是否发布重启
    */
    string postRestart = 4 ;
    /*
    是否自动运行
    */
    string autoStart = 5 ;
    /*
    是否需要用户检查
    */
    string userCheck = 6 ;
    /*
    是否完全更新
    */
    string fullUpdate = 7 ;
    /*
    强制更新
    */
    string force = 8 ;
    /*
    强制安装
    */
    string forceInstall = 9 ;
    /*
    包Id
    */
    string packageId = 10 ;
    /*
    包名称
    */
    string name = 11 ;
    /*
    安装路径
    */
    string installPath = 12 ;
    /*
    版本类型 1 程序包,  2 配置包,  4 文件包
    */
    int32 type = 13 ;
    /*
    平台
    */
    string platform = 14 ;
}
        
    
    /*
    策略ID
    */
    string strategyID = 1 ;
    /*
    策略名称
    */
    string name = 2 ;
    /*
    api版本
    */
    string apiVersion = 3 ;
    /*
    集群列表
    */
    repeated cmdb.ClusterInfo clusters = 4 ;
    /*
    部署包信息
    */
    PackageList packageList = 5 ;
}

/*
UpdateApi返回
*/
message UpdateResponseWrapper {
    /*
    返回码
    */
    int32 code = 1 ;
    /*
    返回码解释
    */
    string codeExplain = 2 ;
    /*
    错误详情
    */
    string error = 3 ;
    /*
    返回数据
    */
    easy_flow.DeployStrategy data = 4 ;
}

